<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英語默書練習系統 | 進階互動版</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header 保持不變 -->
        <div class="header">
            <h1>英語默書練習系統</h1>
            <div class="subtitle">多單元學習平台 | 自動進度追蹤 + 互動練習</div>
        </div>
        
        <!-- 單元控制區 保持不變 -->
        <div class="unit-controls">
            <div class="unit-selector">
                <select class="unit-select" id="unit-select"></select>
            </div>
            <div class="unit-info">
                <div class="unit-title" id="current-unit-title">選擇單元開始學習</div>
                <div class="unit-description" id="current-unit-description"></div>
                <div class="unit-meta">
                    <span id="current-unit-stats">0 詞彙 | 0 句子</span>
                    <span id="current-unit-progress">掌握度: 0%</span>
                </div>
            </div>
        </div>

        <!-- 學習進度概覽 保持不變 -->
        <div class="stats-container"><!-- 內容不變，略過詳細結構，可保留原有 --></div>

        <!-- ============= 新增：互動練習區塊 ============= -->
        <div id="exercise-panels" style="margin-top: 30px;">
            <!-- 詞彙運用拖拽 (Vocabulary Drag & Drop) -->
            <div class="exercise-section" id="vocab-drag-section" style="display: none;">
                <div class="section-header">
                    <h3><i class="fas fa-arrows-alt"></i> 詞彙運用 · 拖拽填空</h3>
                    <div class="exercise-controls">
                        <button class="btn-check" onclick="checkVocabDrag()"><i class="fas fa-check-circle"></i> 檢查答案</button>
                        <button class="btn-reset" onclick="resetVocabDrag()"><i class="fas fa-undo-alt"></i> 重新開始</button>
                        <button class="btn-undo" onclick="undoVocabDrag()"><i class="fas fa-history"></i> 返回上一步</button>
                    </div>
                </div>
                <div id="vocab-drag-container"></div>
                <div id="vocab-drag-feedback" class="feedback-area"></div>
            </div>

            <!-- 完形填空 (Cloze Test) -->
            <div class="exercise-section" id="cloze-section" style="display: none;">
                <div class="section-header">
                    <h3><i class="fas fa-edit"></i> 完形填空</h3>
                    <div class="exercise-controls">
                        <button class="btn-check" onclick="checkCloze()"><i class="fas fa-check-circle"></i> 檢查答案</button>
                        <button class="btn-reset" onclick="resetCloze()"><i class="fas fa-undo-alt"></i> 重新開始</button>
                    </div>
                </div>
                <div id="cloze-text" class="exercise-content"></div>
                <div id="cloze-feedback" class="feedback-area"></div>
            </div>

            <!-- 句子配對 (7選5) 拖拽 -->
            <div class="exercise-section" id="sevenfive-section" style="display: none;">
                <div class="section-header">
                    <h3><i class="fas fa-tasks"></i> 句子配對 · 拖拽短語</h3>
                    <div class="exercise-controls">
                        <button class="btn-check" onclick="checkSevenFive()"><i class="fas fa-check-circle"></i> 檢查答案</button>
                        <button class="btn-reset" onclick="resetSevenFive()"><i class="fas fa-undo-alt"></i> 重新開始</button>
                        <button class="btn-undo" onclick="undoSevenFiveDrag()"><i class="fas fa-history"></i> 返回上一步</button>
                    </div>
                </div>
                <div id="sevenfive-drag-container"></div>
                <div id="sevenfive-text" class="exercise-content"></div>
                <div id="sevenfive-feedback" class="feedback-area"></div>
            </div>

            <!-- 語法填空 (Grammar Fill-in) -->
            <div class="exercise-section" id="grammar-section" style="display: none;">
                <div class="section-header">
                    <h3><i class="fas fa-language"></i> 語法填空</h3>
                    <div class="exercise-controls">
                        <button class="btn-check" onclick="checkGrammar()"><i class="fas fa-check-circle"></i> 檢查答案</button>
                        <button class="btn-reset" onclick="resetGrammar()"><i class="fas fa-undo-alt"></i> 重新開始</button>
                    </div>
                </div>
                <div id="grammar-text" class="exercise-content"></div>
                <div id="grammar-feedback" class="feedback-area"></div>
            </div>
        </div>
        <!-- ============= 互動練習區塊結束 ============= -->

<!-- 原有卡片區域 (單詞/句子) -->
<div class="section cards-section active" id="words-cards">
    <div class="section-controls">
        <div class="section-title">高頻詞彙</div>
        <div>
            <button class="reset-all-button" onclick="resetAllUnitsData(event)">
                <i class="fas fa-trash-alt"></i> 重置所有單元
            </button>
            <button class="reset-button" onclick="resetCurrentTabData(event)">
                <i class="fas fa-redo"></i> 重置當前單元
            </button>
        </div>
    </div>
    <!-- ✅ 這是 app.js 要操作的 #words-grid 元素 -->
    <div class="cards-grid" id="words-grid">
        <div class="loading">
            <i class="fas fa-spinner fa-spin"></i> 請先選擇單元...
        </div>
    </div>
</div>

<div class="section cards-section" id="sentences-cards">
    <div class="section-controls">
        <div class="section-title">句子讀默</div>
        <div>
            <button class="reset-all-button" onclick="resetAllUnitsData(event)">
                <i class="fas fa-trash-alt"></i> 重置所有單元
            </button>
            <button class="reset-button" onclick="resetCurrentTabData(event)">
                <i class="fas fa-redo"></i> 重置當前單元
            </button>
        </div>
    </div>
    <!-- ✅ 這是 app.js 要操作的 #sentences-grid 元素 -->
    <div class="cards-grid" id="sentences-grid">
        <div class="loading">
            <i class="fas fa-spinner fa-spin"></i> 請先選擇單元...
        </div>
    </div>
</div>

        <!-- Footer 保持不變 -->
        <div class="footer"><!-- 內容略 --></div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>